<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- This Handlebars template wraps compiled markdown documents
         into complete HTML pages that look kind of like pages from
         a GitHub Wiki. Used in compileMarkdown.js
         
         Created by Curran Kelleher March 2015 -->
  
    <!-- Use Github-like style, from https://github.com/sindresorhus/github-markdown-css -->
    <link rel="stylesheet" type="text/css" href="github-markdown.css">

    <!-- CSS that makes the page look more like the GitHub Wiki. -->
    <link rel="stylesheet" type="text/css" href="github-wiki.css">
  
    <title>Bundle Layout</title>
  </head>
  <body>
    <div class="markdown-body">
      <h1>Bundle Layout</h1>
      <blockquote>
  <p><a href="Home">Wiki</a> ▸ [[API Reference]] ▸ [[Layouts]] ▸ <strong>Bundle Layout</strong></p>
</blockquote>

<p>Implements Danny Holten’s <a href="http://www.win.tue.nl/~dholten/papers/bundles_infovis.pdf">hierarchical edge bundling</a> algorithm. For each input link, a path is computed that travels through the tree, up the parent hierarchy to the least common ancestor, and then back down to the destination node. This sequence of nodes can then be used in conjunction with other <a href="Hierarchy-Layout">hierarchical layouts</a>, such as <a href="Cluster-Layout">cluster</a> to generate bundled splines between nodes:</p>

<p><img src="bundle.png" alt="bundle" /></p>

<p>For example, consider this visualization of <a href="http://bl.ocks.org/mbostock/1044242">software dependencies</a>.</p>

<p><a name="bundle" href="Bundle-Layout#bundle">#</a> d3.layout.<b>bundle</b>()</p>

<p>Constructs a new default bundle layout. Currently, the bundle layout is stateless and thus only has a default configuration. The returned layout object is both an object and a function. That is: you can call the layout like any other function, and the layout has additional methods that change its behavior. Like other classes in D3, layouts follow the method chaining pattern where setter methods return the layout itself, allowing multiple setters to be invoked in a concise statement.</p>

<p><a name="_bundle" href="Bundle-Layout#_bundle">#</a> <b>bundle</b>(<i>links</i>)</p>

<p>Evaluates the bundle layout on the specified array of <em>links</em>, returning the computed path from the source to the target, through the <a href="http://en.wikipedia.org/wiki/Lowest_common_ancestor">least common ancestor</a>. Each input link must have two attributes:</p>

<ul>
  <li>source - the source node.</li>
  <li>target - the target node.</li>
</ul>

<p>Furthermore, each node must have one attribute:</p>

<ul>
  <li>parent - the parent node.</li>
</ul>

<p>This is a subset of the fields generated by the <a href="Hierarchy-Layout">hierarchy layouts</a>. The return value of the layout is an array of paths, where each path is represented as an array of nodes. Thus, the bundle layout does not compute the basis splines directly; instead, it returns an array of nodes which implicitly represent the control points of the spline. You can use this array in conjunction with <a href="SVG-Shapes#line">d3.svg.line</a> or <a href="SVG-Shapes#line_radial">d3.svg.line.radial</a> to generate the splines themselves. For example, if you were to use a <a href="Cluster-Layout">cluster</a>:</p>

<p><code>javascript
var cluster = d3.layout.cluster()
    .size([2 * Math.PI, 500]);
</code></p>

<p>A suitable line generator for hierarchical edge bundling might be:</p>

<p><code>javascript
var line = d3.svg.line.radial()
    .interpolate("bundle")
    .tension(.85)
    .radius(function(d) { return d.y; })
    .angle(function(d) { return d.x; });
</code></p>

<p>The bundle layout is designed to work in conjunction with the line generator’s “bundle” interpolation mode, though technically speaking you can use any interpolator or shape generator. Holten’s bundle strength parameter is exposed as the line’s <a href="SVG-Shapes#line_tension">tension</a>.</p>

    </div>
  </body>
</html>
