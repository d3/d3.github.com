!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-quadtree"),require("d3-collection"),require("d3-dispatch"),require("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(n.d3_force=n.d3_force||{},n.d3_quadtree,n.d3_collection,n.d3_dispatch,n.d3_timer)}(this,function(n,t,r,e,i){"use strict";function u(n,t){function r(){var r,i,u=e.length,o=0,f=0;for(r=0;u>r;++r)i=e[r],o+=i.x,f+=i.y;for(o=o/u-n,f=f/u-t,r=0;u>r;++r)i=e[r],i.x-=o,i.y-=f}var e;return null==n&&(n=0),null==t&&(t=0),r.initialize=function(n){e=n},r.x=function(t){return arguments.length?(n=+t,r):n},r.y=function(n){return arguments.length?(t=+n,r):t},r}function o(n){return function(){return n}}function f(){return 1e-6*(Math.random()-.5)}function a(n){return n.x+n.vx}function c(n){return n.y+n.vy}function l(n){function r(){function n(n,t,e,i,u){var o=n.data,a=n.r,c=x+a;{if(!o)return t>d+c||d-c>i||e>y+c||y-c>u;if(o.index>r){var h=d-o.x-o.vx,s=y-o.y-o.vy,p=h*h+s*s;c*c>p&&(0===h&&(h=f(),p+=h*h),0===s&&(s=f(),p+=s*s),p=(c-(p=Math.sqrt(p)))/p*l,v.vx+=(h*=p)*(c=(a*=a)/(g+a)),v.vy+=(s*=p)*c,o.vx-=h*(c=1-c),o.vy-=s*c)}}}for(var r,o,v,d,y,x,g,s=i.length,p=0;h>p;++p)for(o=t.quadtree(i,a,c).visitAfter(e),r=0;s>r;++r)v=i[r],x=u[r],g=x*x,d=v.x+v.vx,y=v.y+v.vy,o.visit(n)}function e(n){if(n.data)return n.r=u[n.data.index];for(var t=n.r=0;4>t;++t)n[t]&&n[t].r>n.r&&(n.r=n[t].r)}var i,u,l=1,h=1;return"function"!=typeof n&&(n=o(null==n?1:+n)),r.initialize=function(t){var r,e=(i=t).length;for(u=new Array(e),r=0;e>r;++r)u[r]=+n(i[r],r,i)},r.iterations=function(n){return arguments.length?(h=+n,r):h},r.strength=function(n){return arguments.length?(l=+n,r):l},r.radius=function(t){return arguments.length?(n="function"==typeof t?t:o(+t),r):n},r}function h(n,t){return t}function v(n){function t(n){return 1/Math.min(d[n.source.index],d[n.target.index])}function e(t){for(var r=0,e=n.length;p>r;++r)for(var i,u,o,a,h,v,d,x=0;e>x;++x)i=n[x],u=i.source,o=i.target,a=o.x+o.vx-u.x-u.vx||f(),h=o.y+o.vy-u.y-u.vy||f(),v=Math.sqrt(a*a+h*h),v=(v-l[x])/v*t*c[x],a*=v,h*=v,o.vx-=a*(d=y[x]),o.vy-=h*d,u.vx+=a*(d=1-d),u.vy+=h*d}function i(){if(v){var t,e,i=v.length,o=n.length,f=r.map(v,x);for(t=0,d=new Array(i);i>t;++t)d[t]=0;for(t=0;o>t;++t)e=n[t],e.index=t,"object"!=typeof e.source&&(e.source=f.get(e.source)),"object"!=typeof e.target&&(e.target=f.get(e.target)),++d[e.source.index],++d[e.target.index];for(t=0,y=new Array(o);o>t;++t)e=n[t],y[t]=d[e.source.index]/(d[e.source.index]+d[e.target.index]);c=new Array(o),u(),l=new Array(o),a()}}function u(){if(v)for(var t=0,r=n.length;r>t;++t)c[t]=+g(n[t],t,n)}function a(){if(v)for(var t=0,r=n.length;r>t;++t)l[t]=+s(n[t],t,n)}var c,l,v,d,y,x=h,g=t,s=o(30),p=1;return null==n&&(n=[]),e.initialize=function(n){v=n,i()},e.links=function(t){return arguments.length?(n=t,i(),e):n},e.id=function(n){return arguments.length?(x=n,e):x},e.iterations=function(n){return arguments.length?(p=+n,e):p},e.strength=function(n){return arguments.length?(g="function"==typeof n?n:o(+n),u(),e):g},e.distance=function(n){return arguments.length?(s="function"==typeof n?n:o(+n),a(),e):s},e}function d(n){return n.x}function y(n){return n.y}function x(n){function t(){u(),s.call("tick",a),l>c&&(g.stop(),s.call("end",a))}function u(){var t,r,e,i=n.length;for(c+=(v-c)*h,y.each(function(n){n(c)}),t=0;i>t;++t)r=n[t],r.x+=r.vx*=d,r.y+=r.vy*=d;for(t in x)e=x[t],r=n[t],r.x=e.x,r.y=e.y,r.vx=r.vy=0}function o(){for(var t,r=0,e=n.length;e>r;++r){if(t=n[r],t.index=r,isNaN(t.x)||isNaN(t.y)){var i=q*Math.sqrt(r),u=r*w;t.x=i*Math.cos(u),t.y=i*Math.sin(u)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function f(t){return t.initialize&&t.initialize(n),t}var a,c=1,l=.001,h=1-Math.pow(l,1/300),v=0,d=.6,y=r.map(),x={},g=i.timer(t),s=e.dispatch("tick","end");return null==n&&(n=[]),o(),a={tick:u,restart:function(){return g.restart(t),a},stop:function(){return g.stop(),a},nodes:function(t){return arguments.length?(n=t,o(),y.each(f),a):n},alpha:function(n){return arguments.length?(c=+n,a):c},alphaMin:function(n){return arguments.length?(l=+n,a):l},alphaDecay:function(n){return arguments.length?(h=+n,a):+h},alphaTarget:function(n){return arguments.length?(v=+n,a):v},drag:function(n){return arguments.length?(d=1-n,a):1-d},force:function(n,t){return arguments.length>1?(null==t?y.remove(n):y.set(n,f(t)),a):y.get(n)},fix:function(n,t,r){return x[n.index]={x:null==t?n.x:+t,y:null==r?n.y:+r},a},unfix:function(n){return delete x[n.index],a},find:function(t,r,e){var i,u,o,f,a,c=0,l=n.length;for(null==e?e=1/0:e*=e,c=0;l>c;++c)f=n[c],i=t-f.x,u=r-f.y,o=i*i+u*u,e>o&&(a=f,e=o);return a},on:function(n,t){return arguments.length>1?(s.on(n,t),a):s.on(n)}}}function g(){function n(n){var r,o=u.length,f=t.quadtree(u,d,y).visitAfter(e);for(c=n,r=0;o>r;++r)a=u[r],f.visit(i)}function r(){if(u){var n,t=u.length;for(l=new Array(t),n=0;t>n;++n)l[n]=+h(u[n],n,u)}}function e(n){var t,r,e,i,u,o=0;if(n.length){for(e=i=u=0;4>u;++u)(t=n[u])&&(r=t.value)&&(o+=r,e+=r*t.x,i+=r*t.y);n.x=e/o,n.y=i/o}else{t=n,t.x=t.data.x,t.y=t.data.y;do o+=l[t.data.index];while(t=t.next)}n.value=o}function i(n,t,r,e){if(!n.value)return!0;var i=n.x-a.x,u=n.y-a.y,o=e-t,h=i*i+u*u;if(h>o*o/g)return x>h&&(0===i&&(i=f(),h+=i*i),0===u&&(u=f(),h+=u*u),v>h&&(h=Math.sqrt(v*h)),a.vx+=i*n.value*c/h,a.vy+=u*n.value*c/h),!0;if(!(n.length||h>=x)){(n.data!==a||n.next)&&(0===i&&(i=f(),h+=i*i),0===u&&(u=f(),h+=u*u),v>h&&(h=Math.sqrt(v*h)));do n.data!==a&&(o=l[n.data.index]*c/h,a.vx+=i*o,a.vy+=u*o);while(n=n.next)}}var u,a,c,l,h=o(-30),v=1,x=1/0,g=.81;return n.initialize=function(n){u=n,r()},n.strength=function(t){return arguments.length?(h="function"==typeof t?t:o(+t),r(),n):h},n.distanceMin=function(t){return arguments.length?(v=t*t,n):Math.sqrt(v)},n.distanceMax=function(t){return arguments.length?(x=t*t,n):Math.sqrt(x)},n.theta=function(t){return arguments.length?(g=t*t,n):Math.sqrt(g)},n}function s(n){function t(n){for(var t,r=0,o=e.length;o>r;++r)t=e[r],t.vx+=(u[r]-t.x)*i[r]*n}function r(){if(e){var t,r=e.length;for(i=new Array(r),u=new Array(r),t=0;r>t;++t)i[t]=isNaN(u[t]=+n(e[t],t,e))?0:+f(e[t],t,e)}}var e,i,u,f=o(.1);return"function"!=typeof n&&(n=o(null==n?0:+n)),t.initialize=function(n){e=n,r()},t.strength=function(n){return arguments.length?(f="function"==typeof n?n:o(+n),r(),t):f},t.x=function(e){return arguments.length?(n="function"==typeof e?e:o(+e),r(),t):n},t}function p(n){function t(n){for(var t,r=0,o=e.length;o>r;++r)t=e[r],t.vy+=(u[r]-t.y)*i[r]*n}function r(){if(e){var t,r=e.length;for(i=new Array(r),u=new Array(r),t=0;r>t;++t)i[t]=isNaN(u[t]=+n(e[t],t,e))?0:+f(e[t],t,e)}}var e,i,u,f=o(.1);return"function"!=typeof n&&(n=o(null==n?0:+n)),t.initialize=function(n){e=n,r()},t.strength=function(n){return arguments.length?(f="function"==typeof n?n:o(+n),r(),t):f},t.y=function(e){return arguments.length?(n="function"==typeof e?e:o(+e),r(),t):n},t}var M="0.6.3",q=10,w=Math.PI*(3-Math.sqrt(5));n.version=M,n.forceCenter=u,n.forceCollide=l,n.forceLink=v,n.forceManyBody=g,n.forceSimulation=x,n.forceX=s,n.forceY=p});