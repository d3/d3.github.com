// https://d3js.org/d3-chord/ Version 1.0.2. Copyright 2016 Mike Bostock.
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-array"),require("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-path"],t):t(n.d3=n.d3||{},n.d3,n.d3)}(this,function(n,t,r){"use strict";function e(n){return function(t,r){return n(t.source.value+t.target.value,r.source.value+r.target.value)}}function u(){function n(n){var e,l,i,c,f,s,p=n.length,h=[],d=t.range(p),g=[],A=[],x=A.groups=new Array(p),b=new Array(p*p);for(e=0,f=-1;++f<p;){for(l=0,s=-1;++s<p;)l+=n[f][s];h.push(l),g.push(t.range(p)),e+=l}for(u&&d.sort(function(n,t){return u(h[n],h[t])}),o&&g.forEach(function(t,r){t.sort(function(t,e){return o(n[r][t],n[r][e])})}),e=y(0,v-r*p)/e,c=e?r:v/p,l=0,f=-1;++f<p;){for(i=l,s=-1;++s<p;){var M=d[f],m=g[M][s],q=n[M][m],_=l,C=l+=q*e;b[m*p+M]={index:M,subindex:m,startAngle:_,endAngle:C,value:q}}x[M]={index:M,startAngle:i,endAngle:l,value:h[M]},l+=c}for(f=-1;++f<p;)for(s=f-1;++s<p;){var P=b[s*p+f],T=b[f*p+s];(P.value||T.value)&&A.push(P.value<T.value?{source:T,target:P}:{source:P,target:T})}return a?A.sort(a):A}var r=0,u=null,o=null,a=null;return n.padAngle=function(t){return arguments.length?(r=y(0,t),n):r},n.sortGroups=function(t){return arguments.length?(u=t,n):u},n.sortSubgroups=function(t){return arguments.length?(o=t,n):o},n.sortChords=function(t){return arguments.length?(null==t?a=null:(a=e(t))._=t,n):a&&a._},n}function o(n){return function(){return n}}function a(n){return n.source}function l(n){return n.target}function i(n){return n.radius}function c(n){return n.startAngle}function f(n){return n.endAngle}function s(){function n(){var n,o=A.call(arguments),a=t.apply(this,o),l=e.apply(this,o),i=+u.apply(this,(o[0]=a,o)),c=s.apply(this,o)-g,f=d.apply(this,o)-g,y=i*p(c),x=i*h(c),b=+u.apply(this,(o[0]=l,o)),M=s.apply(this,o)-g,m=d.apply(this,o)-g;if(v||(v=n=r.path()),v.moveTo(y,x),v.arc(0,0,i,c,f),c===M&&f===m||(v.quadraticCurveTo(0,0,b*p(M),b*h(M)),v.arc(0,0,b,M,m)),v.quadraticCurveTo(0,0,y,x),v.closePath(),n)return v=null,n+""||null}var t=a,e=l,u=i,s=c,d=f,v=null;return n.radius=function(t){return arguments.length?(u="function"==typeof t?t:o(+t),n):u},n.startAngle=function(t){return arguments.length?(s="function"==typeof t?t:o(+t),n):s},n.endAngle=function(t){return arguments.length?(d="function"==typeof t?t:o(+t),n):d},n.source=function(r){return arguments.length?(t=r,n):t},n.target=function(t){return arguments.length?(e=t,n):e},n.context=function(t){return arguments.length?(v=null==t?null:t,n):v},n}var p=Math.cos,h=Math.sin,d=Math.PI,g=d/2,v=2*d,y=Math.max,A=Array.prototype.slice;n.chord=u,n.ribbon=s,Object.defineProperty(n,"__esModule",{value:!0})});